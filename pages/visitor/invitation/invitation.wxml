<!--pages/home/visitor/invitation.wxml-->

<view class="normal-container">
  <!-- inviteStatus:被邀请人状态，1是未绑定过手机号，2是绑定过且有邀请函，3是绑定过但没有邀请函 -->
  <form hidden='{{inviteStatus != 1}}' bindsubmit="confirmInvite" report-submit>
    <view class="normal-panel">
      <view class="normal-panel-title">
        邀请函
      </view>
      <i-panel>
        <i-input name="phone" value="{{ phone }}" type="number" maxlength='11' title="预约电话" placeholder="请输入预约手机号" />
        <i-input name="code" value="{{ code }}" type="number" maxlength='4' title="验证码" placeholder="请输入手机验证码" />
      </i-panel>
      <view class="normal-panel-desc">
        抱歉，我们需要验证您的手机号来确认您是受邀人。
      </view>
      <view class="normal-panel-btnform">
        <button type="primary" formType="submit">
          验证
        </button>
      </view>
      <i-spin size="large" fix wx:if="{{ spinShow }}"></i-spin>
    </view>
  </form>
   <!-- class="normal-panel" -->
  <view hidden='{{inviteStatus !=2}}' style='position:relative;background:#fff;'>
    <!-- <view class="normal-panel-title">
      邀请函
    </view> -->
    <view class="normal-panel-content">
      <map style="width: 100%; height: 200px;" latitude="{{latitude}}" longitude="{{longitude}}"
       markers="{{markers}}" show-location="{{showLocation}}" enable-zoom="true">
      </map>
      <view bindtap='goToTiande' class="invitation-row color-yellow" style='padding:20rpx 20rpx 0;font-size:24px;'>
        <!-- <i-icon type="coordinates_fill" size="24" color="#80848f"></i-icon> -->
        导航到天德中心
      </view>
    </view>
    <view class="normal-panel-content" style='text-align:left;'>
      <view style='padding-top:0;' class="invitation-rowtitle color-subcontent">邀请人</view>
      <view class="invitation-row ">
        {{ invitor.personName || '未署名' }}
      </view>
      <view class="invitation-row">
        {{company + ' ' + invitor.organizationName }}
      </view>
      <view class="invitation-rowtitle color-subcontent">到访时间</view>
      <view class="invitation-row">
        {{ visitorTime }}
      </view>
      <view class="invitation-row">
        {{ visitorStartTime + ' ~ ' + visitorEndTime }}
      </view>
    </view>
    <view class="normal-panel-btnform">
      <button type="primary" bindtap="receiveInvite">
        确认
      </button>
    </view>
    <i-spin size="large" fix wx:if="{{ spinShow }}"></i-spin>
  </view>
  <view hidden='{{inviteStatus != 3}}' class="normal-panel">
    <view class="normal-panel-title">
      抱歉
    </view>
    <view class="normal-panel-desc">
      您不是当前邀请函的被邀请人
    </view>
    <view class="normal-panel-btnform">
      <button type="primary" bindtap="backToHome">
        返回首页
      </button>
    </view>
    <i-spin size="large" fix wx:if="{{ spinShow }}"></i-spin>
  </view>

</view>